1. 近期持续学习或实践的全栈技术是什么：Redis分布式锁
- 原理：分布式锁是控制分布式系统之间同步访问共享资源的一种方式。在多线程或者多进程并发的情况下，使用锁来保证一个代码块在同一时间内只能由一个线程执行；
	- 加锁是用SET命令，然后带上NX参数，key是锁名字，value是持有者id，再加一个过期时间，这里value要用持有者id的原因是谁申请、谁释放的原则，会在解锁时进行检查，过期时间是为了兜底，防止异常情况下锁被永久占据。
	- 解锁的话，主要涉及两步操作，一个是查看是不是自己的锁，如果是接着就是释放锁，为了保证原子性，解锁需要用LUA脚本进行。
- 结合实际项目：小米请假线上问题排查-分布式锁
	- 问题：小米请假系统-员工发起请假后，飞书日程重复创建
	- 原因： 定时任务和回调同时触发而创建两个日历
	- 系统概述：小米请假内部考勤系统-飞书小程序，
	- 数据流转链路：
		- 请假提交：提交表单数据->数据校验->调用BPM创建审批流->调用PS创建的申请记录->->创建请假记录
		- 请假审批：审批中间节点回调->保存请假申请审批中间数据->审批最终节点回调->保存请假申请审批最终数据->请假申请成功/失败->调用飞书接口创建飞书日程->更新数据库日程ID、处理状态
		- 定时任务（同步BPM审批流到PS补偿任务）：每分钟抓取过去 7 天内未处理的回调数据，走审批最终节点逻辑
	- 解决：封装Redis分布式锁工具库，在创建日程的核心逻辑上使用 try-catch-finally 的形式包裹，try中核心逻辑和加锁，finally做解锁。


1. 有技术创新或突破的方案：防篡改Sign验证、RSA加密保护敏感数据
	- 问题分析：设计并开发面向离职员工的工资单自助查询平台，解决每月约200人手动邮件咨询导致的效率问题（原需2-3天处理500封邮件），实现离职员工通过小米账号SSO登录后，经二次验证码校验可安全查询历史薪资明细（含基本工资、餐补、个税、离职补偿金等）。面向外部人员切涉及薪酬相关，因此着重需要考虑安全加固
	- 关键实现细节：后端生成RSA公私钥对，私钥存Session，公钥经AES加密返回前端；每次接口调用后动态更新私钥有效期，避免长期存储风险。
	- 


2. 在项目中遇到的重大技术问题：人事流程系统&小米请假 Saas迁移
背景：飞书本地化签约即将到期，继续使用本地化的方式需要自己维护数据成本高，因此打算迁移到飞书Saas端。

方案一：飞书交互复杂且重要并行方案:服务端部署两套方案(成本高)
方案二：小程序并行方案:服务端认证改造支持双应用方案
当前免登步骤： 
第一步:小程序(web)调用开放平台小程序登录接口获取用户登录预授权码code;
第二步:应用后端服务调用登录校验接口获取access-token验证code的合法性,并通过获取登录用户信息获取到用户身份; 
第三步:应用后端设置应用自身登录态。

改造后免登步骤： 
第一步:小程序(web)调用开放平台小程序登录接口获取用户登录预授权码code; 
第二步:重写认证使两个客户端都能效验通过,应用后端服务根据user-agent内飞书版本号,选取请求来源(主要改动点) ,如果没有客户端标识,采用双重调用策略,选择指定端调用登录校验接口获取access-token验证code的合法性,并通过获取登录用户信息获取到用户身份;
第三步:应用后端设置应用自身登录态。

最终效果：飞书本地化和Saas化都能够正常使用离职申请和小米请假小程序